package com.hatsnake.ever.util;

import java.util.ArrayList;

import javax.servlet.http.HttpSession;
import javax.servlet.http.HttpSessionEvent;
import javax.servlet.http.HttpSessionListener;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import com.hatsnake.ever.member.vo.MemberVO;

public class SessionUserCounter implements HttpSessionListener {

	private final Logger logger = LoggerFactory.getLogger(SessionUserCounter.class);
	
	// 총 접속자 수
	public static int count;
	
	// 접속자 아이디
	public static ArrayList<String> member;
	
	public static int getCount() {
		return count;
	}
	
	public static ArrayList<String> getMember() {
		return member;
	}
			
	@Override
	public void sessionCreated(HttpSessionEvent event) {
		count++;
		
		HttpSession session = event.getSession();
		MemberVO sessionMember = (MemberVO) session.getAttribute("member");
		member.add(sessionMember.getMid());
	}

	@Override
	public void sessionDestroyed(HttpSessionEvent event) {
		count--;
		if(count < 0) count = 0;
		
		HttpSession session = event.getSession();
		MemberVO sessionMember = (MemberVO) session.getAttribute("member");
		member.remove(sessionMember.getMid())
	}

}
